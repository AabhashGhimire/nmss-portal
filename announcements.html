<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Notice | NMSS Science Club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 text-gray-800">

<!-- HEADER -->
<header class="bg-white shadow sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">

    <!-- LOGO -->
    <div class="flex items-center gap-3">
      <img src="assets/images/nmss-logo.png" class="w-10 h-10" alt="NMSS">
      <span class="font-bold text-blue-800">NMSS</span>
    </div>

    <!-- HAMBURGER -->
    <button onclick="toggleMenu()" class="md:hidden text-2xl">â˜°</button>

    <!-- DESKTOP MENU -->
    <nav class="hidden md:flex gap-5 text-sm font-medium">
      <a href="index.html">Home</a>
      <a href="students.html">Members</a>
      <a href="teachers.html">Teachers</a>
      <a href="announcements.html" class="text-blue-700 font-semibold">Notice</a>
      <a href="gallery.html">Gallery</a>
      <a href="events.html">Events</a>
      <a href="certificates.html">Certificates</a>
    </nav>
  </div>

  <!-- MOBILE MENU -->
  <div id="menu" class="hidden md:hidden border-t bg-white px-4 py-3">
    <nav class="flex flex-col gap-2 text-sm">
      <a href="index.html">Home</a>
      <a href="students.html">Members</a>
      <a href="teachers.html">Teachers</a>
      <a href="announcements.html" class="text-blue-700 font-semibold">Notice</a>
      <a href="gallery.html">Gallery</a>
      <a href="events.html">Events</a>
      <a href="certificates.html">Certificates</a>
    </nav>
  </div>
</header>

<!-- PAGE TITLE (padding fixes scroll overlap) -->
<section class="max-w-5xl mx-auto px-4 pt-[100px] pb-4">
  <h1 class="text-3xl font-bold text-blue-800 mb-2">
    Notices
  </h1>
  <p class="text-gray-600">
    Official announcements from the NMSS Science Club.
  </p>
</section>

<!-- NOTICES LIST -->
<main
  id="noticeList"
  class="max-w-5xl mx-auto px-4 pb-20 space-y-4"
>
  <p class="text-gray-500 text-center">
    Loading notices...
  </p>
</main>

<!-- FIREBASE -->
<script type="module" src="js/firebase.js"></script>

<script type="module">
  import { db } from "./js/firebase.js";
  import { collection, onSnapshot } from
    "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const list = document.getElementById("noticeList");

  onSnapshot(collection(db, "announcements"), snapshot => {
    list.innerHTML = "";

    if (snapshot.empty) {
      list.innerHTML = `
        <p class="text-gray-500 text-center">
          No notices available.
        </p>
      `;
      return;
    }

    snapshot.forEach(doc => {
      const n = doc.data();

      // NEW badge (24 hours)
      let isNew = false;
      if (n.createdAt && n.createdAt.toMillis) {
        isNew = Date.now() - n.createdAt.toMillis() < 86400000;
      }

      list.innerHTML += `
        <div class="bg-white rounded-xl shadow p-5">
          <div class="flex items-center gap-2 mb-1">
            <h3 class="font-semibold text-lg">
              ${n.title || "Notice"}
            </h3>
            ${isNew ? `
              <span class="text-xs bg-blue-600 text-white px-2 py-0.5 rounded">
                NEW
              </span>` : ""}
          </div>
          <p class="text-sm text-gray-700">
            ${n.message || ""}
          </p>
        </div>
      `;
    });
  });

  // Hamburger toggle
  function toggleMenu() {
    document.getElementById("menu").classList.toggle("hidden");
  }
  window.toggleMenu = toggleMenu;
</script>

</body>
</html>
